# Firebase Invites Quickstart

The Firebase Invites Test Application (testapp) demonstrates sending and
receiving Firebase Invites and Dynamic Links using the Firebase Unity SDK.


## Known Issues

Creating an InvitesSender and InvitesReceiver together can cause one of them to
fail to initialize correctly. To work around this issue, wait to create an
InvitesSender until after InvitesReceiver.Fetch has completed. This is
demonstrated in UIHandler.cs.


## Requrements

The testapp requires version 5.3 of Unity or higher.


## Introduction

[Read more about Firebase Invites](https://firebase.google.com/docs/invites/)


## Building the testapp

### Android

  - Register your Android app with Firebase.
    - Create a new app on the [Firebase
      console](https://firebase.google.com/console/), and attach your Android
      app to it.
      - You can use "com.google.firebase.unity.invites.testapp" as the Package Name
        while you're testing.
      - To [generate a SHA1](https://developers.google.com/android/guides/client-auth)
        run this command on Mac and Linux,
        ```
        keytool -exportcert -list -v -alias androiddebugkey -keystore ~/.android/debug.keystore
        ```
        or this command on Windows,
        ```
        keytool -exportcert -list -v -alias androiddebugkey -keystore %USERPROFILE%\.android\debug.keystore
        ```
      - If keytool reports that you do not have a debug.keystore, you can
        [create one with](http://developer.android.com/tools/publishing/app-signing.html#signing-manually),
        ```
        keytool -genkey -v -keystore ~/.android/debug.keystore -storepass android -alias androiddebugkey -keypass android -dname "CN=Android Debug,O=Android,C=US"
        ```
    - Download a `google-services.json` file from the Firebase console.
      This file identifies your Android app to the Firebase backend, and will
      need to be included in the testapp later.
    - For further details please refer to the [general
      instructions for setting up an Android app with
      Firebase](https://firebase.google.com/docs/android/setup).
  - Download the [Firebase Unity SDK](https://dev-partners.googlesource.com/unity-firebase/+archive/zip.tar.gz)
    and unzip it somewhere convenient.
  - Open the testapp project in the Unity editor.
  - Open the scene MainScene
  - Import the custom package FirebaseApp.unitypackage from the Firebase
    Unity SDK, downloaded previously.  (From the menu, select
    Assets > Import Package > Custom Package)
  - Import the custom package FirebaseInvites.unitypackage in the same way.
  - From the menu, select Assets > Google Play Services > Resolve Client Jars.
    Note that this option will only appear on the menu if you have both
    imported the firebase packages, and set the build target to Android.
  - Take the `google-services.json` that was downloaded earlier, and copy it
    into your the testapp's `Assets` directory.
    (Note: This has to be done after the packages are loaded, so that the plugin
    notices the file and generates the appropriate resource files.)
  - Double check:  At this point, several files should have been generated by
    the plugin, and be present in your `Assets` directory:
     - `Assets/Plugins/Android/Firebase/res/values/google-services.xml`
     - `Assets/Plugins/Android/firebase-common-9.4.0` (Directory)
     - `Assets/Plugins/Android/firebase-iid-9.4.0` (Directory)
     - `Assets/Plugins/Android/firebase-invites-9.4.0.aar`
     - `Assets/Plugins/Android/play-services-base-9.4.0.aar`
     - `Assets/Plugins/Android/play-services-basement-9.4.0.aar`
     - `Assets/Plugins/Android/play-services-tasks-9.4.0.aar`
  - Build the Unity project and run it on your Android device.


### iOS

  - Register your iOS app with Firebase.
    - Create a new app on the [Firebase
      console](https://firebase.google.com/console/), and attach your iOS
      app to it.
      - You can use "com.google.firebase.unity.invites.testapp" as the Package Name
        while you're testing.
    - Download a `GoogleService-Info.plist` file from the Firebase console.
      This file identifies your iOS app to the Firebase backend, and will
      need to be included in the testapp later.
    - For further details please refer to the [general instructions for setting
      up an iOS app with Firebase](https://firebase.google.com/docs/ios/setup).
  - Download the [Firebase Unity SDK](https://dev-partners.googlesource.com/unity-firebase/+archive/zip.tar.gz)
    and unzip it somewhere convenient.
  - Open the testapp project in the Unity editor.
  - Open the scene MainScene
  - Import the custom package FirebaseApp.unitypackage from the Firebase
    Unity SDK, downloaded previously.  (From the menu, select
    Assets > Import Package > Custom Package)
  - Import the custom package FirebaseInvites.unitypackage in the same way.
  - Build your project for iOS.
  - Navigate to the xcode project that was created by Unity, and create a new
    file called Podfile, with the following contents:
    ```
    source 'https://github.com/CocoaPods/Specs.git'
    platform :ios, '8.0'

    target 'Unity-iPhone' do
      pod 'Firebase/Invites'
    end
    ```
  - From the terminal, navigate to the project directory, and run `pod install`.
  - From the terminal, run `open Unity-iPhone.xcworkspace` to open xcode.
    (Important: Launch it from `Unity-iPhone.xcworkspace` and not
    `Unity-iPhone.xcproject`.  Launching from `Unity-iPhone.xcproject` will
    cause problems.)
  - Under 'Build Settings' of the project, add `$(inherited)` to "Other Linker
    Flags".
  - Drag the `GoogleServices-Info.plist` file from finder into the root of the
    project in xcode.
  - In your project's Info tab, under the URL Types section, add a new URL
    Type with the Identifier `google`, and URL Schemes with the value of the
    REVERSED_CLIENT_ID string in your GoogleService-Info.plist.
  - Add an additional URL Type, with both the Identifier and URL Schemes set
    to your package name, i.e. "com.google.firebase.unity.invites.testapp".
  - Build the Unity project and run it on your iOS device.


## Using the testapp

- When you first run the app, it will check for an incoming dynamic link or
  invitation, and report whether it was able to fetch an invite.
- To send an invite, use the "Send Invite" button on the right side.
- This will open a screen that allows you to send an invite for the current
  app via e-mail or SMS.
- To simulate receiving an invitation from a friend, you can send yourself an
  invite, uninstall the test app, then click the link in your e-mail.
  - This would normally send you to the Play Store or App Store to download the
    app. Because this is a test app, it will link to a nonexistent store page.
- After clicking the invite link, re-install and run the app on your device or
  emulator, and see the invitation fetched on the receiving side.

## Support

[https://firebase.google.com/support/]()


## License

Copyright 2016 Google, Inc.

Licensed to the Apache Software Foundation (ASF) under one or more contributor
license agreements.  See the NOTICE file distributed with this work for
additional information regarding copyright ownership.  The ASF licenses this
file to you under the Apache License, Version 2.0 (the "License"); you may not
use this file except in compliance with the License.  You may obtain a copy of
the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
License for the specific language governing permissions and limitations under
the License.

